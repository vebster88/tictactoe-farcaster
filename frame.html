<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TicTacToe Farcaster Frame</title>
    
    <!-- Farcaster Frame –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ -->
    <meta property="fc:frame" content="vNext" />
    <meta property="fc:frame:image" content="https://tiktaktoe-farcaster-dun.vercel.app/api/frame/image" />
    <meta property="fc:frame:button:1" content="üéÆ –ù–∞—á–∞—Ç—å –∏–≥—Ä—É" />
    <meta property="fc:frame:button:2" content="üìñ –ü—Ä–∞–≤–∏–ª–∞" />
    <meta property="fc:frame:post_url" content="https://tiktaktoe-farcaster-dun.vercel.app/api/frame/action" />
    
    <!-- Open Graph -->
    <meta property="og:title" content="TicTacToe Farcaster Frame" />
    <meta property="og:description" content="–ò–≥—Ä–∞–π—Ç–µ –≤ –∫—Ä–µ—Å—Ç–∏–∫–∏-–Ω–æ–ª–∏–∫–∏ –ø—Ä—è–º–æ –≤ Farcaster!" />
    <meta property="og:image" content="https://tiktaktoe-farcaster-dun.vercel.app/api/frame/image" />
    <meta property="og:url" content="https://tiktaktoe-farcaster-dun.vercel.app/frame.html" />
    
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background: #1a1a2e;
            color: white;
            text-align: center;
        }
        .frame-preview {
            border: 2px solid #0f3460;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            background: #16213e;
        }
        .game-image {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
        }
        .button {
            background: #e94560;
            color: white;
            border: none;
            padding: 12px 24px;
            margin: 8px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
        }
        .button:hover {
            background: #d63447;
        }
        .instructions {
            text-align: left;
            background: #0f3460;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>üéÆ TicTacToe Farcaster Frame</h1>
    
    <div class="frame-preview">
        <h2>–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä Frame</h2>
        <img src="/api/frame/image" alt="Game Board" class="game-image" />
        <br>
        <button class="button">üéÆ –ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
        <button class="button">üìñ –ü—Ä–∞–≤–∏–ª–∞</button>
    </div>
    
    <div class="instructions">
        <h3>üìã –ö–∞–∫ –∏–≥—Ä–∞—Ç—å –≤ Farcaster:</h3>
        <ol>
            <li><strong>–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —ç—Ç–æ–π —Å—Å—ã–ª–∫–æ–π</strong> –≤ Farcaster –ø–æ—Å—Ç–µ</li>
            <li><strong>Frame –ø–æ—è–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏</strong> –≤ –ª–µ–Ω—Ç–µ</li>
            <li><strong>–ù–∞–∂–º–∏—Ç–µ "–ù–∞—á–∞—Ç—å –∏–≥—Ä—É"</strong> –¥–ª—è —Å—Ç–∞—Ä—Ç–∞</li>
            <li><strong>–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏</strong> (1-9) –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞</li>
            <li><strong>–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É</strong> –¥–ª—è —Å–æ–≤–µ—Ä—à–µ–Ω–∏—è —Ö–æ–¥–∞</li>
            <li><strong>–ò–≥—Ä–∞–π—Ç–µ –ø—Ä–æ—Ç–∏–≤ –ò–ò</strong> –¥–æ –ø–æ–±–µ–¥—ã!</li>
        </ol>
        
        <h3>üéØ –ü–æ–∑–∏—Ü–∏–∏ –Ω–∞ –ø–æ–ª–µ:</h3>
        <pre style="font-size: 18px; text-align: center;">
1 | 2 | 3
---------
4 | 5 | 6
---------
7 | 8 | 9
        </pre>
    </div>
    
    <div class="instructions">
        <h3>üîó –°—Å—ã–ª–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:</h3>
        <p><strong>Frame URL:</strong> <a href="https://tiktaktoe-farcaster-erkiivd8i-vebster88-2900s-projects.vercel.app/frame.html" style="color: #e94560;">https://tiktaktoe-farcaster-erkiivd8i-vebster88-2900s-projects.vercel.app/frame.html</a></p>
        <p><strong>–û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:</strong> <a href="https://tiktaktoe-farcaster-erkiivd8i-vebster88-2900s-projects.vercel.app/" style="color: #e94560;">https://tiktaktoe-farcaster-erkiivd8i-vebster88-2900s-projects.vercel.app/</a></p>
        <p><strong>API –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:</strong> <a href="/api/frame/image" style="color: #e94560;">/api/frame/image</a></p>
    </div>
    
    <p style="margin-top: 40px; color: #666;">
        –°–æ–∑–¥–∞–Ω–æ <strong>vebster88</strong> | Powered by Farcaster Frames
    </p>
    
    <!-- Farcaster Mini App SDK -->
    <script type="module">
        console.log('üöÄ Script started loading...');
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Farcaster Mini App SDK
        async function initializeFarcasterSDK() {
            try {
                console.log('üéÆ Initializing Farcaster Mini App SDK...');
                
                // –ü—ã—Ç–∞–µ–º—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π SDK
                let sdk;
                try {
                    const { sdk: realSDK } = await import('https://esm.sh/@farcaster/miniapp-sdk');
                    sdk = realSDK;
                    console.log('‚úÖ Real Farcaster SDK loaded');
                } catch (importError) {
                    console.log('‚ö†Ô∏è Real SDK not available, using mock SDK');
                    // Fallback –Ω–∞ mock SDK
                    sdk = {
                        actions: {
                            ready: async () => {
                                console.log('‚úÖ Mock sdk.actions.ready() called successfully');
                                return Promise.resolve();
                            }
                        },
                        user: async () => {
                            console.log('üë§ Mock sdk.user() called');
                            return { 
                                fid: 12345, 
                                username: 'testuser',
                                displayName: 'Test User'
                            };
                        },
                        context: async () => {
                            console.log('üì± Mock sdk.context() called');
                            return { 
                                cast: { 
                                    hash: '0x1234567890abcdef',
                                    author: { fid: 12345, username: 'testuser' }
                                } 
                            };
                        }
                    };
                }
                
                // –í—ã–∑—ã–≤–∞–µ–º ready() - —ç—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –¥–ª—è Farcaster
                await sdk.actions.ready();
                console.log('‚úÖ sdk.actions.ready() called successfully');
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –º—ã –≤ Farcaster
                if (sdk.user) {
                    const user = await sdk.user();
                    if (user) {
                        console.log('üë§ Farcaster user:', user);
                    }
                }
                
                if (sdk.context) {
                    const context = await sdk.context();
                    if (context) {
                        console.log('üì± Farcaster context:', context);
                    }
                }
                
                console.log('‚úÖ Farcaster Mini App SDK initialized successfully');
                
            } catch (error) {
                console.error('‚ùå Farcaster Mini App SDK initialization failed:', error);
                console.log('üåê Not in Farcaster environment, running in browser');
            }
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º SDK –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeFarcasterSDK);
        } else {
            initializeFarcasterSDK();
        }
    </script>
</body>
</html>
